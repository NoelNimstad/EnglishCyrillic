<!DOCTYPE html>
<html>
	<head>
		<style>
			body 
			{
				font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
			}

			table 
			{
				border-collapse: collapse;
			}
			
			td:first-child
			{
				background-color: lightgray;
			}

			td
			{
				border: 1px solid black;
				padding: 0.3rem 1rem;
			}
		</style>
	</head>
	<body>
		<center><h2>English Cyrillic (Erillic)</h2></center>
		<center style="margin-top: -1rem;"><h3>İɴлiш Ciрiлiк (Δрiлiк)</h3></center>
		<center>
			<table>
				<tr>
					<td>B<u>ai</u>t</td>
					<td>A a</td>
					<td>/eɪ/</td>
					<td>Бaт</td>
				</tr>
				<tr>
					<td>C<u>a</u>t</td>
					<td>Ɐ ɐ</td>
					<td>/æ/</td>
					<td>Kɐт</td>
				</tr>
				<tr>
					<td><u>Uh</u></td>
					<td>Δ <small>Δ</small></td>
					<td>/ə/ /ʌ/ /ɚ/ /ɜ/</td>
					<td>Δ</td>
				</tr>
				<tr>
					<td>F<u>a</u>ther</td>
					<td>Ʌ ʌ</td>
					<td>/ɑ/ /ɐ/ /a/</td>
					<td>Фʌθ<small>Δ</small>р</td>
				</tr>
				<tr>
					<td><u>B</u>anana</td>
					<td>Б <small>Б</small></td>
					<td>/b/</td>
					<td>Б<small>Δ</small>нɐн<small>Δ</small></td>
				</tr>
				<tr>
					<td><u>S</u>un</td>
					<td>C c</td>
					<td>/s/</td>
					<td>C<small>Δ</small>н</td>
				</tr>
				<tr>
					<td><u>Ch</u>urn</td>
					<td>Ч ч</td>
					<td>/ʧ⁠/</td>
					<td>Ч<small>Δ</small>рн</td>
				</tr>
				<tr>
					<td><u>Sh</u>ow</td>
					<td>Ш ш</td>
					<td>/ʃ/</td>
					<td>Шo</td>
				</tr>
				<tr>
					<td><u>D</u>ark</td>
					<td>Д д</td>
					<td>/d/</td>
					<td>Дʌрк</td>
				</tr>
				<tr>
					<td><u>I</u>n</td>
					<td>İ i</td>
					<td>/ɪ/ /i/ /ɨ/</td>
					<td>İн</td>
				</tr>
				<tr>
					<td><u>E</u>nd</td>
					<td>E e</td>
					<td>/e/ /ɛ/</td>
					<td>Eнд</td>
				</tr>
				<tr>
					<td><u>F</u>all</td>
					<td>Ф ф</td>
					<td>/f/</td>
					<td>Фҩл</td>
				</tr>
				<tr>
					<td><u>G</u>ood</td>
					<td>Ґ ґ</td>
					<td>/ɡ/</td>
					<td>Ґ<small>Δ</small>д</td>
				</tr>
				<tr>
					<td>Vi<u>si</u>on</td>
					<td>Ж ж</td>
					<td>/ʒ/</td>
					<td>Viж<small>Δ</small>н</td>
				</tr>
				<tr>
					<td><u>H</u>ow</td>
					<td>Х х</td>
					<td>/h/</td>
					<td>Хʌв</td>
				</tr>
				<tr>
					<td><u>Y</u>ard</td>
					<td>Й й</td>
					<td>/j/</td>
					<td>Йʌрд</td>
				</tr>
				<tr>
					<td><u>K</u>ing</td>
					<td>K к</td>
					<td>/k/</td>
					<td>Kiɴ</td>
				</tr>
				<tr>
					<td><u>L</u>ove</td>
					<td>Л л</td>
					<td>/l/ /ɫ/</td>
					<td>Л<small>Δ</small>v</td>
				</tr>
				<tr>
					<td><u>M</u>ap</td>
					<td>М м</td>
					<td>/m/</td>
					<td>Мɐп</td>
				</tr>
				<tr>
					<td><u>N</u>o</td>
					<td>Н н</td>
					<td>/n/</td>
					<td>Нo</td>
				</tr>
				<tr>
					<td>Ba<u>ng</u></td>
					<td>N ɴ</td>
					<td>/ŋ/</td>
					<td>Бɐɴ</td>
				</tr>
				<tr>
					<td><u>Oa</u>k</td>
					<td>O o</td>
					<td>/oʊ/ /əʊ/</td>
					<td>Oк</td>
				</tr>
				<tr>
					<td>H<u>o</u>t</td>
					<td>Ҩ ҩ</td>
					<td>/ɔ/ /o/</td>
					<td>Хҩт</td>
				</tr>
				<tr>
					<td>Pint</td>
					<td>П п</td>
					<td>/p/</td>
					<td>Пʌiнт</td>
				</tr>
				<tr>
					<td><u>R</u>oad</td>
					<td>Р р</td>
					<td>/ɹ/ /r/</td>
					<td>Рoд</td>
				</tr>
				<tr>
					<td>Be<u>tt</u>er</td>
					<td>Ϙ ϙ</td>
					<td>/ɾ/</td>
					<td>Бeϙ<small>Δ</small></td>
				</tr>
				<tr>
					<td><u>T</u>erm</td>
					<td>T т</td>
					<td>/t/</td>
					<td>T<small>Δ</small>рм</td>
				</tr>
				<tr>
					<td><u>Ts</u>unami</td>
					<td>Ц ц</td>
					<td>/ts/</td>
					<td>Ц<small>Δ</small>нʌмi</td>
				</tr>
				<tr>
					<td>M<u>oo</u>n</td>
					<td>У у</td>
					<td>/u/ /ʉ/</td>
					<td>Мӯɴ</td>
				</tr>
				<tr>
					<td><u>You</u></td>
					<td>Ю ю</td>
					<td>/ju/</td>
					<td>Ю</td>
				</tr>
				<tr>
					<td><u>Th</u>e</td>
					<td>ϴ θ</td>
					<td>/ð/</td>
					<td>ϴ<small>Δ</small></td>
				</tr>
				<tr>
					<td><u>Th</u>ink</td>
					<td>8 <small>8</small></td>
					<td>/θ/</td>
					<td>8iɴк</td>
				</tr>
				<tr>
					<td><u>V</u>oice</td>
					<td>V v</td>
					<td>/v/</td>
					<td>Vҩic</td>
				</tr>
				<tr>
					<td><u>W</u>in</td>
					<td>В в</td>
					<td>/w/</td>
					<td>Вiн</td>
				</tr>
				<tr>
					<td>H<u>oo</u>k</td>
					<td>U u</td>
					<td>/ʊ/</td>
					<td>Вiн</td>
				</tr>
				<tr>
					<td>Uh<u>-</u>oh</td>
					<td>ʔ ɂ</td>
					<td>/ʔ/</td>
					<td>Δɂo</td>
				</tr>
			</table>
			<table style="margin-top: 1rem;">
				<tr>
					<td>H<u>ee</u>l (vs hill)</td>
					<td style="font-family: Arial, Helvetica, sans-serif;">◌̄</td>
					<td style="font-family: Arial, Helvetica, sans-serif;">/◌ː/ /◌ˑ/</td>
					<td>Хīл (vs хiл)</td>
				</tr>
			</table>
		</center>
		<center style="margin-top: 2rem;">
			<p style="max-width: 40rem; text-align: left;">Kҩл мi İшм<small>Δ</small>eл. Cʌм йi<small>Δ</small>рc <small>Δ</small>ґo–нev<small>Δ</small>р мʌiнд хʌҩ лҩɴ прicʌicлi– хɐviɴ лiϙл ҩр нo м<small>Δ</small>нi iн мʌi п<small>Δ</small>c, ɐнд н<small>Δ</small>8iɴ п<small>Δ</small>тiкй<small>Δ</small>л<small>Δ</small> ту iнт<small>Δ</small>рecт мi ҩн шҩ, ʌi 8ҩт ʌi вuд ceiл <small>Δ</small><small>Б</small>ʌuт <small>Δ</small> лiϙл ɐнд ci θ<small>Δ</small> вʌϙ<small>Δ</small>рi пʌт ҩv θ<small>Δ</small> в<small>Δ</small>рлд. <a href="https://www.fulltextarchive.com/book/Moby-Dick-or-The-Whalex8185/">[Мo<small>Б</small>i Дiк / Cҩрc]</a></p>
			<p style="max-width: 40rem; text-align: left;">Call me Ishmael. Some years ago–never mind how long precisely– having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world. <a href="https://www.fulltextarchive.com/book/Moby-Dick-or-The-Whalex8185/">[Moby dick / Source]</a></p>
		</center>
		<center style="margin-top: 2rem;">
			<textarea id="input" style="width: 30rem; min-height: 5rem; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; resize: vertical;" placeholder="İнпΔт лɐтiн iɴґлiш хiр"></textarea>
		</center>
		<center style="margin-top: 0.5rem;">
			<button id="submit">Convert</button>
		</center>
		<center>
			<p id="result" style="max-width: 40rem; text-align: left; font-family: Arial, Helvetica, sans-serif;"></p>
		</center>
		<script>
			const DICT = '{"eɪ":"a","æ":"ɐ","ə":"<small>Δ</small>","ʌ":"<small>Δ</small>","ɚ":"<small>Δ</small>","ɜ":"<small>Δ</small>","ɑ":"ʌ","ɐ":"ʌ","a":"ʌ","b":"<small>Б</small>","s":"c","ʧ⁠":"ч","ʃ":"ш","d":"д","ɪ":"i","i":"i","ɨ":"i","e":"e","ɛ":"e","f":"ф","ɡ":"ґ","ʒ":"ж","h":"х","j":"й","k":"к","l":"л","ɫ":"л","m":"м","n":"н","ŋ":"ɴ","oʊ":"o","əʊ":"o","ɔ":"ҩ","o":"ҩ","p":"п","ɹ":"р","r":"р","ɾ":"ϙ","t":"т","ts":"ц","u":"у","ʉ":"у","ju":"ю","ð":"θ","θ":"<small>8</small>","v":"v","w":"в","ʊ":"u","ʔ":"ɂ"}';
			const dictionary = JSON.parse(DICT);

			const wordBank = 
			{
				"i": "ʌi",
				"have": "хɐv",
				"be": "<small>Б</small>i",
				"with": "вi<small>8</small>",
				"our": "ʌu<small>Δ</small>",
				"and": "ɐнд",
			};

			async function Erillic(word)
			{
				return new Promise(async (res, rej) => 
				{
					const response = await fetch("https://api.dictionaryapi.dev/api/v2/entries/en/" + word);

					const json = (await response.json())[0];
					if(json == undefined)
					{
						if(wordBank[word] != undefined)
						{
							res(wordBank[word] + " ");
						} else 
						{
							res(word + " ");
						}
					} 

					const stringified = JSON.stringify(json);
					if(json.phonetics.find(i => i.text) == undefined)
					{
						if(wordBank[word] != undefined)
						{
							res(wordBank[word] + " ");
						} else 
						{
							res("_ ")
						}
					} 
					let phonetic = (json.phonetic ? json.phonetic : json.phonetics.find(i => i.text).text).replace(/\//g, "").replace(/\[|\]/g, "");
					

					const result = phonetic.split("").map(i => dictionary[i] ? dictionary[i] : i).join("").replace("<small>Δ</small>в", "o")
																										  .replace(/\./g, "")
																										  .replace("йу", "ю")
																										  .replace("ɝ", "<small>Δ</small>р")
																										  .replace(/т͡ш|тш/g, "ч")
																										  .replace("<small>Δ</small>ː", "<ruby><small>Δ</small><rt style=\"margin-bottom: -0.5rem;\"><b style=\"font-weight: bolder;\">–</b></rt></ruby>")
																										  .replace("ҩː", "<ruby><small>ҩ</small><rt style=\"margin-bottom: -0.575rem;\"><b style=\"font-weight: bolder;\">–</b></rt></ruby>")
																										  .replace("ː", "̄")
																										  .replace("<small>Δ</small>u", "o")
																										  .replace(/ŏ/g, "ҩ")
																										  .replace(/̆/g, "")
																										  .replace("ˈ", "")
																										  .replace(/̩|ˌ/g, "")
																										  .replace(/\((.*?)\)/g, "$1");
					if(result[0] == "{") res("");
					res(result + " ");
				});
			};

			const textarea = document.getElementById("input");
			const button = document.getElementById("submit");
			const result = document.getElementById("result");

			button.addEventListener("click", async () => 
			{
				result.innerHTML = "";
				const toConvert = textarea.value.replace(/[^\w\s]+/g, "").split(" ");
				for(let i = 0; i < toConvert.length; i++)
				{
					result.innerHTML += await Erillic(toConvert[i].toLowerCase());
				}
			});
		</script>
	</body>
</html>
